{"version":3,"sources":["christmas.ts"],"names":["BuildFeed","Christmas","movementSpeed","snowContainer","snow","counter","Snowflake","[object Object]","this","element","moveX","localSpeed","Math","round","random","top","window","innerHeight","remove","left","innerWidth","style","transform","document","createElement","deferAnimate","requestAnimationFrame","animate","i","newSnow","push","appendChild","getElement","flake","bumpElement","splice","indexOf","Setup","className","match","navigator","userAgent","parseInt","body","setInterval","addEventListener"],"mappings":"AAAA,aAEA,IAAOA,WAAP,SAAOA,IAAU,SAAAC,GAEb,MAAMC,EAAgB,EAEtB,IAAIC,EACAC,EAAyB,GACzBC,EAAkB,EAEtB,MAAMC,EAMKC,aAEH,OAAOC,KAAKC,QAGTF,YAAYG,GAEf,IAAIC,EAAaC,KAAKC,OAAQD,KAAKE,SAAW,EAAK,IAAOZ,GAE1D,OADAM,KAAKO,IAAMP,KAAKO,IAAMJ,EAClBH,KAAKO,KAAO,IAAMP,KAAKO,IAAOC,OAAOC,YAAc,IAEnDT,KAAKC,QAAQS,UACN,GAGPR,IAEAC,EAAaC,KAAKC,OAAQD,KAAKE,SAAW,EAAK,IAAOZ,GACtDM,KAAKW,KAAOP,KAAKE,SAAW,GACtBN,KAAKW,KAAOR,EACZH,KAAKW,KAAOR,EAEdH,KAAKW,MAAQ,IAAMX,KAAKW,KAAQH,OAAOI,WAAa,KAEpDZ,KAAKC,QAAQS,UACN,IAIfV,KAAKC,QAAQY,MAAMC,uBAAyBd,KAAKW,WAAWX,KAAKO,UAC1D,GAGXR,cAEIC,KAAKC,QAAUc,SAASC,cAAc,OACtChB,KAAKO,IAAM,EACXP,KAAKW,KAAOP,KAAKC,MAAMD,KAAKE,SAAWE,OAAOI,aAItD,SAASK,IAELT,OAAOU,sBAAsBC,GAGjC,SAASA,IAEL,GAAItB,EAAU,GAAM,EAEhB,IAAK,IAAIuB,EAAI,EAAGA,EAAI,EAAGA,IACvB,CACI,MAAMC,EAAU,IAAIvB,EACpBF,EAAK0B,KAAKD,GACV1B,EAAc4B,YAAYF,EAAQG,cAI1C,IAAK,MAAMC,KAAS7B,EACpB,CACmB6B,EAAMC,aAAY,IAI7B9B,EAAK+B,OAAO/B,EAAKgC,QAAQH,GAAQ,GAIzC5B,IAGYJ,EAAAoC,MAAhB,YAEIlC,EAAgBoB,SAASC,cAAc,QACzBc,UAAY,iBAE1B,MAAMC,EAAQvB,OAAOwB,UAAUC,UAAUF,MAAM,wBACnCA,EAAQG,SAASH,EAAM,IAAM,IAE9B,KAGPpC,EAAcmC,WAAa,2BAG/Bf,SAASoB,KAAKZ,YAAY5B,GAE1Ba,OAAOU,sBAAsBC,GAC7BiB,YAAYnB,EAAc,MAtGjB,CAAAzB,EAAAC,YAAAD,EAAAC,UAAS,KAA1B,CAAOD,YAAAA,UAAS,KA0GhBgB,OAAO6B,iBAAiB,OAAQ7C,UAAUC,UAAUoC","file":"christmas.js","sourcesContent":["\"use strict\";\r\n\r\nmodule BuildFeed.Christmas\r\n{\r\n    const movementSpeed = 5;\r\n\r\n    let snowContainer: HTMLDivElement;\r\n    let snow: Array<Snowflake> = [];\r\n    let counter: number = 0;\r\n\r\n    class Snowflake\r\n    {\r\n        private readonly element: HTMLDivElement;\r\n        private top: number;\r\n        private left: number;\r\n\r\n        public getElement()\r\n        {\r\n            return this.element;\r\n        }\r\n\r\n        public bumpElement(moveX: boolean)\r\n        {\r\n            let localSpeed = Math.round(((Math.random() / 2) + 0.5) * movementSpeed);\r\n            this.top = this.top + localSpeed;\r\n            if (this.top < -10 || this.top > (window.innerHeight + 10))\r\n            {\r\n                this.element.remove();\r\n                return true;\r\n            }\r\n\r\n            if (moveX)\r\n            {\r\n                localSpeed = Math.round(((Math.random() / 2) + 0.5) * movementSpeed);\r\n                this.left = Math.random() > 0.5\r\n                    ? this.left + localSpeed\r\n                    : this.left - localSpeed;\r\n\r\n                if (this.left < -10 || this.left > (window.innerWidth + 10))\r\n                {\r\n                    this.element.remove();\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            this.element.style.transform = `translate(${this.left}px, ${this.top}px)`;\r\n            return false;\r\n        }\r\n\r\n        constructor()\r\n        {\r\n            this.element = document.createElement(\"div\");\r\n            this.top = 0;\r\n            this.left = Math.round(Math.random() * window.innerWidth);\r\n        }\r\n    }\r\n\r\n    function deferAnimate()\r\n    {\r\n        window.requestAnimationFrame(animate);\r\n    }\r\n\r\n    function animate()\r\n    {\r\n        if (counter % 5 === 0)\r\n        {\r\n            for (let i = 0; i < 2; i++)\r\n            {\r\n                const newSnow = new Snowflake();\r\n                snow.push(newSnow);\r\n                snowContainer.appendChild(newSnow.getElement());\r\n            }\r\n        }\r\n\r\n        for (const flake of snow)\r\n        {\r\n            const result = flake.bumpElement(true);\r\n\r\n            if (result)\r\n            {\r\n                snow.splice(snow.indexOf(flake), 1);\r\n            }\r\n        }\r\n\r\n        counter++;\r\n    }\r\n\r\n    export function Setup()\r\n    {\r\n        snowContainer = document.createElement(\"div\");\r\n        snowContainer.className = \"snow-container\";\r\n\r\n        const match = window.navigator.userAgent.match(/Firefox\\/([0-9]+)\\./);\r\n        const ver = match ? parseInt(match[1]) : 0;\r\n\r\n        if (ver >= 57)\r\n        {\r\n            // workaround shitty firefox quantum\r\n            snowContainer.className += \" quantum-snow-container\";\r\n        }\r\n\r\n        document.body.appendChild(snowContainer);\r\n\r\n        window.requestAnimationFrame(animate);\r\n        setInterval(deferAnimate, 125);\r\n    }\r\n}\r\n\r\nwindow.addEventListener(\"load\", BuildFeed.Christmas.Setup);"]}